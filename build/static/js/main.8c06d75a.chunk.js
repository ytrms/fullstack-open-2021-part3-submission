(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),u=t.n(c),r=t(8),a=t(3),o=t(2),i=t(4),s=t.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(l,"/").concat(e))},f=function(e){return s.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},m=t(0),h=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"info",children:n})},O=function(e){var n=e.message;return null===n?null:Object(m.jsx)("div",{className:"alert",children:n})},v=function(e){var n=e.value,t=e.handleFilterChange;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,u=e.newNumber,r=e.handleNumberChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:t,onChange:c})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:u,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.name,t=e.number,c=e.id,u=e.removePersonWithId;return Object(m.jsxs)("div",{children:[n," ",t," ",Object(m.jsx)("button",{onClick:function(){return u(c)},children:"Delete"})]},c)},g=function(e){var n=e.personsToShow,t=e.removePersonWithId;return n.map((function(e){return Object(m.jsx)(p,{name:e.name,number:e.number,id:e.id,removePersonWithId:t},e.id)}))},w=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),i=Object(a.a)(u,2),s=i[0],l=i[1],p=Object(o.useState)(""),w=Object(a.a)(p,2),C=w[0],N=w[1],y=Object(o.useState)(""),S=Object(a.a)(y,2),P=S[0],k=S[1],T=Object(o.useState)(null),I=Object(a.a)(T,2),W=I[0],A=I[1],D=Object(o.useState)(null),E=Object(a.a)(D,2),F=E[0],J=E[1];Object(o.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var L=""===P?t:t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(h,{message:W}),Object(m.jsx)(O,{message:F}),Object(m.jsx)(v,{value:P,handleFilterChange:function(e){k(e.target.value)}}),Object(m.jsx)("h2",{children:"Add a new person:"}),Object(m.jsx)(x,{addPerson:function(e){e.preventDefault();var n={name:s,number:C};if(t.find((function(e){return e.name===s}))){if(window.confirm("".concat(s," already exists. Update the associated number?"))){var u=t.find((function(e){return e.name===s}));n=Object(r.a)(Object(r.a)({},u),{},{number:n.number}),f(n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),l(""),N(""),A("".concat(u.name," successfully updated.")),setTimeout((function(){A(null)}),5e3)}))}}else j(n).then((function(e){console.log(e),c(t.concat(e)),N(""),l(""),A("".concat(e.name," succesfully added.")),setTimeout((function(){A(null)}),5e3)}))},newName:s,handleNameChange:function(e){l(e.target.value)},newNumber:C,handleNumberChange:function(e){N(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(g,{personsToShow:L,removePersonWithId:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name," from your list?"))&&b(e).then((function(){c(t.filter((function(n){return n.id!==e}))),A("".concat(n.name," successfully removed.")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){J("".concat(n.name," was already removed before.")),setTimeout((function(){J(null)}),5e3)}))}})]})};t(41);u.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8c06d75a.chunk.js.map